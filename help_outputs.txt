## TPC-DS  

# ------------------------------------------------------------------------
### Data Generation  

dsdgen Population Generator (Version 2.11.0)
Copyright Transaction Processing Performance Council (TPC) 2001 - 2019


USAGE: dsdgen [options]

Note: When defined in a parameter file (using -p), parmeters should
use the form below. Each option can also be set from the command
line, using a form of '-param [optional argument]'
Unique anchored substrings of options are also recognized, and 
case is ignored, so '-sc' is equivalent to '-SCALE'

General Options
===============
ABREVIATION =  <s>       -- build table with abreviation <s>
DIR =  <s>               -- generate tables in directory <s>
HELP =  <n>              -- display this message
PARAMS =  <s>            -- read parameters from file <s>
QUIET =  [Y|N]           -- disable all output to stdout/stderr
SCALE =  <n>             -- volume of data to generate in GB
TABLE =  <s>             -- build only table <s>
UPDATE =  <n>            -- generate update data set <n>
VERBOSE =  [Y|N]         -- enable verbose output
PARALLEL =  <n>          -- build data in <n> separate chunks
CHILD =  <n>             -- generate <n>th chunk of the parallelized data
RELEASE =  [Y|N]         -- display the release information
_FILTER =  [Y|N]         -- output data to stdout
VALIDATE =  [Y|N]        -- produce rows for data validation

Advanced Options
===============
DELIMITER =  <s>         -- use <s> as output field separator
DISTRIBUTIONS =  <s>     -- read distributions from file <s>
FORCE =  [Y|N]           -- over-write data files without prompting
SUFFIX =  <s>            -- use <s> as output file suffix
TERMINATE =  [Y|N]       -- end each record with a field delimiter
VCOUNT =  <n>            -- set number of validation rows to be produced
VSUFFIX =  <s>           -- set file suffix for data validation
RNGSEED =  <n>           -- set RNG seed

# ------------------------------------------------------------------------
### Query Generation  

qgen2 Population Generator (Version 2.11.0)
Copyright Transaction Processing Performance Council (TPC) 2001 - 2019


USAGE: qgen2 [options]

Note: When defined in a parameter file (using -p), parmeters should
use the form below. Each option can also be set from the command
line, using a form of '-param [optional argument]'
Unique anchored substrings of options are also recognized, and 
case is ignored, so '-sc' is equivalent to '-SCALE'

General Options
===============
FILE =  <s>              -- read parameters from file <s>
VERBOSE =  [Y|N]         -- enable verbose output
HELP =  [Y|N]            -- display this message
OUTPUT_DIR =  <s>        -- write query streams into directory <s>
QUIET =  [Y|N]           -- suppress all output (for scripting)
STREAMS =  <n>           -- generate <n> query streams/versions
INPUT =  <s>             -- read template names from <s>
SCALE =  <n>             -- assume a database of <n> GB
LOG =  <s>               -- write parameter log to <s>
QUALIFY =  [Y|N]         -- generate qualification queries in ascending order

Advanced Options
===============
DISTRIBUTIONS =  <s>     -- read distributions from file <s>
PATH_SEP =  <s>          -- use <s> to separate path elements
RNGSEED =  <n>           -- seed the RNG with <n>
RELEASE =  [Y|N]         -- display QGEN release info
TEMPLATE =  <s>          -- build queries from template <s> ONLY
COUNT =  <n>             -- generate <n> versions per stream (used with TEMPLATE)
DEBUG =  [Y|N]           -- minor debugging outptut
FILTER =  [Y|N]          -- write generated queries to stdout
DIALECT =  <s>           -- include query dialect defintions found in <s>.tpl
DIRECTORY =  <s>         -- look in <s> for templates

# ------------------------------------------------------------------------
### Query Generation How To  

from /tools/How_To_Guide-DS-V2.0.0.docx:

How to generate query SQL from templates
The “dsqgen” utility is used to transform the query templates (see query_templates/*.tpl) into executable SQL for your target DBMS. The unmodified templates are not executable.  

Run “dsqgen–h” for the help info. Note that many of the options are “advanced” and usually not needed. 

Since some common SQL features do not have ANSI standard forms (e.g. “LIMIT” and “BEGIN/COMMIT”), the dsqgen utility must be told which “dialect” to use. The following “dialect templates” are supported: db2.tpl, netezza.tpl, oracle.tpl, sqlserver.tpl. The following example generates a SQL file (named query_0.sql) from the query99 template for a 100GB database using Oracle syntax.

dsqgen –template query99.tpl –directory query_templates –dialect oracle –scale 100

Note that dsqgen also reads the “tpcds.idx” file (in the “kit” directory) and the “ansi.tpl” file (in the “kit/query_templates”) so you’ll need to copy something somewhere.

#### Notes  
ansi.tpl  
    define __LIMITA = "";
    define __LIMITB = "top %d";
    define __LIMITC = "";

sqlserver.tpl
    define __LIMITA = "";
    define __LIMITB = "top %d";
    define __LIMITC = "";



How to generate query streams

dsqgen –scale <sf> -dir <path to query templates> -streams <n>
Example:  dsqgen –scale 100 -dir /tmp –streams 5


# ========================================================================

## TPC-H  

# ------------------------------------------------------------------------
### Data Generation  

TPC-H Population Generator (Version 2.18.0 build 0)
Copyright Transaction Processing Performance Council 1994 - 2010
USAGE:
dbgen [-{vf}][-T {pcsoPSOL}]
	[-s <scale>][-C <procs>][-S <step>]
dbgen [-v] [-O m] [-s <scale>] [-U <updates>]

Basic Options
===========================
-C <n> -- separate data set into <n> chunks (requires -S, default: 1)
-f     -- force. Overwrite existing files
-h     -- display this message
-q     -- enable QUIET mode
-s <n> -- set Scale Factor (SF) to  <n> (default: 1) 
-S <n> -- build the <n>th step of the data/update set (used with -C or -U)
-U <n> -- generate <n> update sets
-v     -- enable VERBOSE mode

Advanced Options
===========================
-b <s> -- load distributions for <s> (default: dists.dss)
-d <n> -- split deletes between <n> files (requires -U)
-i <n> -- split inserts between <n> files (requires -U)
-T c   -- generate cutomers ONLY
-T l   -- generate nation/region ONLY
-T L   -- generate lineitem ONLY
-T n   -- generate nation ONLY
-T o   -- generate orders/lineitem ONLY
-T O   -- generate orders ONLY
-T p   -- generate parts/partsupp ONLY
-T P   -- generate parts ONLY
-T r   -- generate region ONLY
-T s   -- generate suppliers ONLY
-T S   -- generate partsupp ONLY

To generate the SF=1 (1GB), validation database population, use:
	dbgen -vf -s 1

To generate updates for a SF=1 (1GB), use:
	dbgen -v -U 1 -s 1

# ------------------------------------------------------------------------
### Query Generation  

TPC-H Parameter Substitution (v. 2.18.0 build 0)
Copyright Transaction Processing Performance Council 1994 - 2010
USAGE: ./qgen <options> [ queries ]
Options:
	-a		-- use ANSI semantics.
	-b <str>	-- load distributions from <str>
	-c		-- retain comments found in template.
	-d		-- use default substitution values.
	-h		-- print this usage summary.
	-i <str>	-- use the contents of file <str> to begin a query.
	-l <str>	-- log parameters to <str>.
	-n <str>	-- connect to database <str>.
	-N		-- use default rowcounts and ignore :n directive.
	-o <str>	-- set the output file base path to <str>.
	-p <n>		-- use the query permutation for stream <n>
	-r <n>		-- seed the random number generator with <n>
	-s <n>		-- base substitutions on an SF of <n>
	-v		-- verbose.
	-t <str>	-- use the contents of file <str> to complete a query
	-x		-- enable SET EXPLAIN in each query.

# ------------------------------------------------------------------------
### Query How To  
See ../dbgen/README for details on qgen usage.

    Enviroment variables are used to control features of DBGEN and QGEN 
    which are unlikely to change from one execution to another.

    Variable    Default     Action
    -------     -------     ------
    DSS_PATH    .           Directory in which to build flat files
    DSS_CONFIG  .           Directory in which to find configuration files
    DSS_DIST    dists.dss   Name of distribution definition file
    DSS_QUERY   .           Directory in which to find query templates
    

QGEN is a simple ASCII text filter, meant to translate query generalized
query syntax("query template") into the executable query text(EQT) re-
quired by the benchmarks. It provides a number of shorthands and syntactic 
extensions that allow the automatic generation of query parameters and some 
control over the operation of the benchmark implementation.

QGEN first strips all comments from the query template, recognizing both
{comment} and --comment styles. Next it traverses the query template
one line at a time, locating required substitution points, called
parameter tags. The values substituted for a given tag are summarized
below.  QGEN does not support nested substitutions. That is, if
the text substituted for tag itself contains a valid tag the second tag
will not be expanded.

Tag             Converted To                    Based on
===             ============                    ========
:c		        database <dbname>;(1)           -n from the command line
:x              set explain on;(1)              -x from the command line
:<number>       paremeter <number>
:s              stream number
:o              output to outpath/qnum.stream;  (1) -o from command line, -s from 
                                                command line
:b              BEGIN WORK;(1)                  -a from comand line
:e              COMMIT WORK(1)                  -a from command line
:q              query number
:n <number>                                     sets rowcount to be returned 
                                                to <number>, unless -N appears on the command line

Notes:
   (1)  This is Informix-specific syntax. Refer to Porting.Notes for
   tailoring the generated text to your database environment.